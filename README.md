#  ğŸ’» Server-Monitoring
> **ë¦¬ëˆ…ìŠ¤ì—ì„œ ì•ˆì •ëœ ì„œë²„ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ëª¨ë‹ˆí„°ë§**
<br></br>

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ Team

ğŸ‘¥ íŒ€ëª… : ì»¤ë‹ì‹œí‹°

|<img src="https://avatars.githubusercontent.com/u/71498489?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/123963462?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/95984922?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/143996082?v=4" width="150" height="150"/>|
|:-:|:-:|:-:|:-:|
|HanJH<br/>[@letsgojh0810](https://github.com/letsgojh0810)|íƒœê·œ<br/>[@EOTAEGYU](https://github.com/EOTAEGYU)|nahong_c<br/>[@HongChan1412](https://github.com/HongChan1412)|Jihoon Kim<br/>[@wild-turkey](https://github.com/wild-turkey)|


</br>

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ

#### 1. ì„œë²„ ê°€ìš©ì„± ë° ë¶€í•˜ ê¸°ë¡ ì‹œìŠ¤í…œ
#### 2. ì‚¬ìš©ì ë¡œê·¸ì¸ ê¸°ë¡ ë¶„ì„ ì‹œìŠ¤í…œ
#### 3. ì‹œìŠ¤í…œ ì˜¤ë¥˜ ë° ì„œë¹„ìŠ¤ ì¥ì•  ê°ì§€ ì‹œìŠ¤í…œ
#### 4. ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ
#### 5. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§
#### 6. CPU ì‚¬ìš©ëŸ‰ ë° í”„ë¡œì„¸ìŠ¤ ìë™ ì •ë¦¬ ì‹œìŠ¤í…œ

</br>


# ğŸš€ Ubuntuì—ì„œ í¬ë¡ íƒ­ì„ ì´ìš©í•œ ì„œë²„ ëª¨ë‹ˆí„°ë§ ìë™í™”

ì´ ë¬¸ì„œëŠ” **Ubuntuì—ì„œ í¬ë¡ íƒ­ì„ ì´ìš©í•´ CPU, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ìƒíƒœ, ì„œë²„ ê°€ìš©ì„±, ì‹œìŠ¤í…œ ì˜¤ë¥˜, ì‚¬ìš©ì ë¡œê·¸ì¸ì„ ìë™ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë°©ë²•**ì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.

---

## ğŸ“Œ 1. ì„¤ì •í•  í¬ë¡ íƒ­ ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡

ì•„ë˜ 6ê°œì˜ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.

| ìŠ¤í¬ë¦½íŠ¸ | ì„¤ëª… |
|----------|------------------------------------------------|
| `cpu_monitor.sh` | CPU ì‚¬ìš©ëŸ‰ í™•ì¸ ë° ê³¼ë¶€í•˜ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ |
| `disk_monitor.sh` | ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ê²½ê³  ë°œì†¡ |
| `network_monitor.sh` | ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸ |
| `server_availability.sh` | ì„œë²„ ê°€ìš©ì„± ë° ë¶€í•˜ ê¸°ë¡ |
| `system_errors.sh` | ì‹œìŠ¤í…œ ì˜¤ë¥˜ ë° ì¥ì•  ê°ì§€ |
| `user_logins.sh` | ì‚¬ìš©ì ë¡œê·¸ì¸ ê¸°ë¡ ë¶„ì„ |

---



---


# ğŸš€ Ubuntuì—ì„œ í¬ë¡ íƒ­ì„ ì´ìš©í•œ ì„œë²„ ëª¨ë‹ˆí„°ë§ ìë™í™”

ì´ ë¬¸ì„œëŠ” **Ubuntuì—ì„œ í¬ë¡ íƒ­ì„ ì´ìš©í•´ CPU, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ìƒíƒœ, ì„œë²„ ê°€ìš©ì„±, ì‹œìŠ¤í…œ ì˜¤ë¥˜, ì‚¬ìš©ì ë¡œê·¸ì¸ì„ ìë™ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë°©ë²•**ì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.

---

## ğŸ“Œ 1. ì„¤ì •í•  í¬ë¡ íƒ­ ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡

ì•„ë˜ 6ê°œì˜ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.

| ìŠ¤í¬ë¦½íŠ¸ | ì„¤ëª… |
|----------|------------------------------------------------|
| `cpu_monitor.sh` | CPU ì‚¬ìš©ëŸ‰ í™•ì¸ ë° ê³¼ë¶€í•˜ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ |
| `disk_monitor.sh` | ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ê²½ê³  ë°œì†¡ |
| `network_monitor.sh` | ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸ |
| `server_availability.sh` | ì„œë²„ ê°€ìš©ì„± ë° ë¶€í•˜ ê¸°ë¡ |
| `system_errors.sh` | ì‹œìŠ¤í…œ ì˜¤ë¥˜ ë° ì¥ì•  ê°ì§€ |
| `user_logins.sh` | ì‚¬ìš©ì ë¡œê·¸ì¸ ê¸°ë¡ ë¶„ì„ |

---

## ğŸ“Œ 2. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±

ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ëŠ” `/home/ubuntu/mission/` í´ë”ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

### `cpu_monitor.sh` (CPU ì‚¬ìš©ëŸ‰ í™•ì¸)
```bash
#!/bin/bash

THRESHOLD=90
LOG_FILE="/var/log/cpu_monitor_cron.log"

export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | awk '{print $2 + $4}')

echo "[$(date)] CPU Usage: $CPU_USAGE%" >> $LOG_FILE

if (( $(echo "$CPU_USAGE > $THRESHOLD" | bc -l) )); then
    HIGH_CPU_PROCESS=$(ps -eo pid,comm,%cpu --sort=-%cpu | awk 'NR==2 {print $1}')
    echo "[$(date)] Killing high CPU process: $HIGH_CPU_PROCESS" >> $LOG_FILE
    kill -9 $HIGH_CPU_PROCESS
fi
```
### `disk_monitor.sh` (ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§)
```bash
#!/bin/bash

THRESHOLD=90
LOG_FILE="/var/log/disk_monitor_cron.log"

USAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')

echo "[$(date)] Disk Usage: $USAGE%" >> $LOG_FILE

if [ "$USAGE" -ge "$THRESHOLD" ]; then
    echo "Warning! Disk usage is at $USAGE%" >> $LOG_FILE
fi
```

### `network_monitor.sh` (ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸)
```bash
#!/bin/bash

LOG_FILE="/var/log/network_monitor_cron.log"
TARGET="8.8.8.8"

if ping -c 1 $TARGET &> /dev/null; then
    echo "[$(date)] Network is UP" >> $LOG_FILE
else
    echo "[$(date)] Network is DOWN" >> $LOG_FILE
fi
```

### `server_availability.sh` (ì„œë²„ ê°€ìš©ì„± ëª¨ë‹ˆí„°ë§)
```bash
#!/bin/bash

LOG_FILE="/var/log/server_availability_cron.log"

echo "[$(date)] CPU Load: $(uptime | awk -F'load average: ' '{print $2}'), RAM Usage: $(free -h | awk '/Mem/ {print $3 "/" $2}')" >> $LOG_FILE
```

### `system_errors.sh` (ì‹œìŠ¤í…œ ì˜¤ë¥˜ ê°ì§€)
```bash
#!/bin/bash

LOG_FILE="/var/log/system_errors_cron.log"

echo "[$(date)] Recent System Errors:" >> $LOG_FILE
journalctl -p 3 -n 10 >> $LOG_FILE
echo "---------------------------------------" >> $LOG_FILE
```

### `user_logins.sh` (ì‚¬ìš©ì ë¡œê·¸ì¸ ê¸°ë¡ ë¶„ì„)
```bash
#!/bin/bash

LOG_FILE="/var/log/user_logins_cron.log"

echo "[$(date)] Recent Logins:" >> $LOG_FILE
last -n 10 >> $LOG_FILE
echo "---------------------------------------" >> $LOG_FILE
```

---

## ğŸ“Œ 3. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

```bash
chmod +x /home/ubuntu/mission/*.sh
```

---

## ğŸ“Œ 4. í¬ë¡ íƒ­ ì„¤ì •

í¬ë¡ íƒ­ì„ ì—´ì–´ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

```bash
crontab -e
```

### í¬ë¡ íƒ­ ì„¤ì • (5ë¶„ë§ˆë‹¤ ì‹¤í–‰)
```bash
*/5 * * * * /bin/bash /home/ubuntu/mission/cpu_monitor.sh >> /var/log/cpu_monitor_cron.log 2>&1
*/5 * * * * /bin/bash /home/ubuntu/mission/disk_monitor.sh >> /var/log/disk_monitor_cron.log 2>&1
*/5 * * * * /bin/bash /home/ubuntu/mission/network_monitor.sh >> /var/log/network_monitor_cron.log 2>&1
*/5 * * * * /bin/bash /home/ubuntu/mission/server_availability.sh >> /var/log/server_availability_cron.log 2>&1
*/5 * * * * /bin/bash /home/ubuntu/mission/system_errors.sh >> /var/log/system_errors_cron.log 2>&1
*/5 * * * * /bin/bash /home/ubuntu/mission/user_logins.sh >> /var/log/user_logins_cron.log 2>&1
```

âœ… ì‹¤í–‰ ê°„ê²©ì„ ì¡°ì •í•˜ê³  ì‹¶ë‹¤ë©´ `*/10 * * * *` (10ë¶„ë§ˆë‹¤), `0 * * * *` (ë§¤ì‹œê°„) ë“±ì˜ ê°’ì„ ë³€ê²½í•˜ë©´ ë©ë‹ˆë‹¤.

---

## ğŸ“Œ 5. í¬ë¡  ì‹¤í–‰ ì—¬ë¶€ í™•ì¸

```bash
tail -f /var/log/syslog | grep CRON
```

âœ… **í¬ë¡ íƒ­ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸!**

---

## ğŸ“Œ 6. ì‹¤í–‰ ë¡œê·¸ í™•ì¸

```bash
tail -f /var/log/cpu_monitor_cron.log
tail -f /var/log/disk_monitor_cron.log
tail -f /var/log/network_monitor_cron.log
tail -f /var/log/server_availability_cron.log
tail -f /var/log/system_errors_cron.log
tail -f /var/log/user_logins_cron.log
```

âœ… **ê° ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œê·¸ë¥¼ ì •ìƒì ìœ¼ë¡œ ì €ì¥í•˜ê³  ìˆëŠ”ì§€ í™•ì¸!**

---

## ğŸ“Œ 7. ì‹¤í–‰ ê²°ê³¼
- system_errors.log  
  <img src="image.png" alt="system_errors.log" width="500">

- cpu_usage.log  
  <img src="image-1.png" alt="cpu_usage.log" width="500">


---

## ğŸ“Œ 8. ìµœì¢… ì •ë¦¬

- `/home/ubuntu/mission`ì— ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì €ì¥
- `chmod +x /home/ubuntu/mission/*.sh` ì‹¤í–‰í•˜ì—¬ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
- `crontab -e`ì—ì„œ í¬ë¡ íƒ­ ë“±ë¡
- ë¡œê·¸ ì €ì¥ í™•ì¸: `tail -f /var/log/*.log`
- í¬ë¡  ì‹¤í–‰ ì—¬ë¶€ í™•ì¸: `tail -f /var/log/syslog | grep CRON`
- `No MTA installed` í•´ê²°: ë¡œê·¸ íŒŒì¼ ì €ì¥ or `postfix` ì„¤ì¹˜